{"version":3,"sources":["webpack:///src/Procurement/budget/edit_bp_full.vue","webpack:///./src/Procurement/budget/edit_bp_full.vue?4b1a","webpack:///./src/Procurement/budget/edit_bp_full.vue?6a50","webpack:///./src/Procurement/budget/edit_bp_full.vue?2f7e","webpack:///./src/Procurement/budget/edit_bp_full.vue"],"names":[],"mappings":"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","file":"89.build.js","sourcesContent":["<template>\r\n    <div v-if=\"ready\">\r\n        <form @submit.prevent=\"handleSubmit()\" class=\"col-12\">\r\n            <div class=\"card\">\r\n                <div class=\"card-header\">\r\n                    <strong>Edit Budget Item : {{ tag }}</strong>\r\n                </div>            \r\n                <div class=\"card-body card-block\">\r\n                    <div class=\"col-12\">\r\n                        <label><b><u>Section 1. General Information</u></b></label>\r\n                    </div>\r\n                    <div class=\"col-12 flex px0\">\r\n                        <div class=\"col-4\">\r\n                            Select Department\r\n                        </div>\r\n                        <div class=\"col-8\">\r\n                            <select class=\"form-control select\" v-model=\"dept\" @change=\"fetch_dept_info()\" :disabled=\"readonly\">\r\n                                <option v-for=\"d in dept_list\" :value=\"d.deptmentid\">{{ d.department }}</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div v-if=\"sub_dept!='na'\" class=\"col-12 flex px0\">\r\n                        <div class=\"col-4\">\r\n                            Select Sub Department\r\n                        </div>\r\n                        <div class=\"col-8\">\r\n                            <select class=\"form-control select\" v-model=\"sub_dept\" :disabled=\"readonly\">\r\n                                <option :value=\"dept\">N/A</option>\r\n                                <option v-for=\"sd in sub_dept_list\" :value=\"sd.subdept\">{{ sd.subdept_full }}</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-12 flex px0\">\r\n                        <div class=\"col-4\">\r\n                            School Year\r\n                        </div>\r\n                        <div class=\"col-8 flex px0\">\r\n                            <div class=\"col-6\">\r\n                                <input type=\"number\" class=\"form-control\" v-model=\"st\" @change=\"update_period\" :readonly=\"readonly\"/>\r\n                            </div>\r\n                            <div class=\"col-6\">\r\n                                <input type=\"number\" class=\"form-control\" v-model=\"ed\" readonly/>\r\n                            </div>                           \r\n                        </div>\r\n                    </div>\r\n                    <div v-if=\"new_asset==false\" class=\"col-12 flex px0\">\r\n                        <div class=\"col-4\">\r\n                            Asset Category\r\n                        </div>\r\n                        <div class=\"col-8\">\r\n                            <select class=\"form-control select\" v-model=\"asset_cat\" :disabled=\"readonly\">\r\n                                <option v-for=\"a in asset_list\" :value=\"a.code\">{{ a.name }}</option>\r\n                                <option value=\"new_asset_cat\">New Asset Category</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div v-if=\"new_asset\" class=\"col-12 flex px0\">\r\n                        <div class=\"col-4\">\r\n                            Asset Category\r\n                        </div>\r\n                        <div class=\"col-8\">\r\n                            New Asset Category\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-12 flex px0\">\r\n                        <div class=\"col-4\">\r\n                            Description\r\n                        </div>\r\n                        <div class=\"col-8\">\r\n                            <textarea class=\"form-control\" rows=\"2\" cols=\"80\" maxlength=\"160\" style='resize:none' placeholder=\"Enter Description\" v-model=\"description\" required :readonly=\"readonly\"></textarea>                \r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-12\">\r\n                        <label><b><u>Section 2. Budget Information</u></b></label>\r\n                    </div>\r\n                    <div class=\"col-12 flex px0\">\r\n                        <div class=\"col-4\">\r\n                            Unit Cost\r\n                        </div>\r\n                        <div class=\"col-8\">\r\n                            <input type=\"number\" class=\"form-control\" step=\"0.01\" min=\"0.01\" :onfocus=\"this.value=''\" v-model=\"unit_cost\" required @change=\"calculate('unit')\" :readonly=\"readonly\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-12 flex px0\">\r\n                        <div class=\"col-4\">\r\n                            Quantity\r\n                        </div>\r\n                        <div class=\"col-8\">\r\n                            <input type=\"number\" class=\"form-control\" step=\"1\" min=\"1\" v-model=\"quantity\" required @change=\"calculate('quantity')\" :readonly=\"readonly\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-12 flex px0\">\r\n                        <div class=\"col-4\">\r\n                            Total Amount\r\n                        </div>\r\n                        <div class=\"col-8\">\r\n                            <input type=\"number\" class=\"form-control\" step=\"0.01\" min=\"0.01\" v-model=\"total_cost\" required @change=\"calculate('total')\" :readonly=\"readonly\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"col-12\">\r\n                        <label><b><u>Section 3. Details</u></b></label>\r\n                    </div>\r\n                    <div v-for=\"c in counter\" class=\"col-12 flex px0\">\r\n                        <div class=\"col-3\">\r\n                            Fund Source {{ c }}\r\n                        </div>\r\n                        <div class=\"col-1\" style='text-align:right;padding-top:0.3rem'>\r\n                            <i v-if=\"(c==1)&&(!readonly)\" class=\"fa fa-plus\" aria-hidden=\"true\" @click=\"add_item\"></i>\r\n                            <i v-if=\"(c>1)&&(!readonly)\" class=\"fa fa-minus\" aria-hidden=\"true\" @click=\"remove_item\"></i>\r\n                        </div>\r\n                        <div class=\"col-8 flex px0\">\r\n                            <div class=\"col-6\">\r\n                                <select class=\"form-control select\" v-model=\"fundsrc[c-1]\" :disabled=\"readonly\">\r\n                                    <option v-for=\"f in fundlist\">{{ f.name }}</option>\r\n                                </select>\r\n                            </div>\r\n                            <div class=\"col-6\">\r\n                                <input type=\"number\" step=\"0.01\" min=\"0.01\" class=\"form-control\" v-model=\"cost[c-1]\" required :readonly=\"readonly\"/>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"card-footer\">\r\n                    <button v-if=\"!readonly\" type=\"submit\" class=\"btn btn-primary btn-sm\" :disabled=\"processing\">\r\n                        <i class=\"fa fa-paper-plane\"></i> Submit\r\n                    </button>\r\n                    <button type=\"button\" class=\"btn btn-danger btn-sm\" @click=\"return_prev\">\r\n                        <i class=\"fa fa-undo\"></i> Return\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    data(){\r\n        return {\r\n            processing:false,\r\n            tag:'',\r\n            display_sub:false,\r\n            fundlist:[],\r\n            counter:1,\r\n            ready:false,\r\n            dept:'',\r\n            dept_list:[],\r\n            fundsrc:[],\r\n            cost:[],\r\n            unit_cost:0,\r\n            quantity:1,\r\n            total_cost:0,\r\n            description:'',\r\n            asset_list:[],\r\n            asset_cat:'',\r\n            st_yr:'',\r\n            ed_yr:'',\r\n            sub_dept_list:[],\r\n            sub_dept:'',\r\n            hv_sub_dept:false,\r\n            new_asset:false,\r\n            readonly:false,\r\n            user_check:'',\r\n        }\r\n    },\r\n    async created(){\r\n        await axios.get('Procurement/shared_backend/check_user_setup.php')\r\n            .then(\r\n                (response)=>{\r\n                    this.user_check = response.data[0].signed;\r\n                    var perm = response.data[0];\r\n                    if(!(this.user_check=='set')){\r\n                        this.$router.push('../user_setup');\r\n                    }\r\n                    if(perm.proc_level<3){\r\n                        this.$alert(\"No permission\").then(\r\n                            ()=>{\r\n                                this.$router.go(-1);\r\n                            }\r\n                        )\r\n                    }\r\n                }\r\n            )     \r\n        var st = document.getElementById('st_tmp').value.split(\"-\");\r\n        this.st = st[0];\r\n        var ed = document.getElementById('ed_tmp').value.split(\"-\");\r\n        this.ed = ed[0];\r\n        this.tag = document.getElementById('tmp_id').value;\r\n        await this.fetch_dept();\r\n        var query_dpt = document.getElementById('query').value;\r\n        if((query_dpt!=undefined)&&(query_dpt!='')){\r\n            this.dept = query_dpt;\r\n        }       \r\n        await this.fetch_sub_dept();\r\n        await this.fetch_asset();\r\n        await this.fetch_fund();\r\n        await this.fetch_bp_info();\r\n        this.ready=true;\r\n    },   \r\n    methods:{\r\n        async fetch_bp_info(){         \r\n            var formData = new FormData();\r\n            formData.append('id',this.tag);\r\n            formData.append('st',this.st);\r\n            formData.append('ed',this.ed);\r\n            await axios.post('Procurement/budget/backend/get_form.php',formData)\r\n                .then(\r\n                    (response)=>{\r\n                        this.asset_cat = response.data[0].asset_cat;\r\n                        this.description = response.data[0].description;\r\n                        this.unit_cost = response.data[0].cost_unit;\r\n                        this.quantity = response.data[0].quantity;\r\n                        this.total_cost = response.data[0].cost_total;\r\n                        if(response.data[0].sub_dept_full=='na'){\r\n                            this.hv_sub_dept=false;\r\n                        } else {\r\n                            this.hv_sub_dept=true;\r\n                            this.sub_dept = response.data[0].subdept;\r\n                        }\r\n                        this.counter = response.data.length;\r\n                        var i = 0;\r\n                        for(i=0;i<this.counter;i++){\r\n                            this.fundsrc[i] = response.data[i].fundsrc;\r\n                            this.cost[i] = response.data[i].fundcost;\r\n                        }\r\n                        this.status = response.data[0].status;\r\n                        if(response.data[0].status!='approve_principal'){\r\n                            this.readonly = false;\r\n                        } else {\r\n                            this.readonly = true;\r\n                        }\r\n                    }\r\n                )\r\n        },\r\n        async fetch_dept_info(){\r\n            await this.fetch_sub_dept();\r\n            await this.fetch_asset();\r\n            await this.fetch_fund();\r\n        },\r\n        add_item(){\r\n            this.counter++;\r\n            this.fundsrc[this.counter-1] = this.fundlist[0].name;\r\n        },\r\n        remove_item(){\r\n            this.counter--;\r\n        },\r\n        calculate(mode){\r\n            switch(mode){\r\n                case 'unit':\r\n                    this.total_cost = this.unit_cost*this.quantity;\r\n                    if(this.counter==1){\r\n                        this.cost[0] = this.total_cost;\r\n                    }\r\n                break;\r\n                case 'quantity':\r\n                    this.total_cost = this.unit_cost*this.quantity;\r\n                    if(this.counter==1){\r\n                        this.cost[0] = this.total_cost;\r\n                    }\r\n                break;\r\n                case 'total':\r\n                    this.unit_cost = this.total_cost/this.quantity;\r\n                    if(this.counter==1){\r\n                        this.cost[0] = this.total_cost;\r\n                    }                   \r\n                break;\r\n            }\r\n            this.$forceUpdate();\r\n        },\r\n        async update_period(){\r\n            this.ed = parseInt(this.st)+1;\r\n            this.$forceUpdate();\r\n            await this.fetch_fund();\r\n        },\r\n        async handleSubmit(){\r\n            this.processing = true;\r\n            var formData = new FormData();\r\n            formData.append('tag',this.tag);\r\n            formData.append('dept',this.dept);\r\n            formData.append('sub_dept',this.sub_dept);\r\n            formData.append('st',this.st);\r\n            formData.append('ed',this.ed);\r\n            formData.append('asset',this.asset_cat);\r\n            formData.append('description',this.description);\r\n            formData.append('unit_cost',this.unit_cost);\r\n            formData.append('quantity',this.quantity);\r\n            formData.append('total',this.total_cost);\r\n            formData.append('fundsrc',this.fundsrc);\r\n            formData.append('fundcost',this.cost);\r\n            formData.append('counter',this.counter);\r\n            formData.append('new_asset',this.new_asset);\r\n            formData.append('status',this.status);\r\n            var check_val = 0;\r\n            var i=0;\r\n            for(i=0;i<this.counter;i++){\r\n                check_val = check_val + parseFloat(this.cost[i]);\r\n            }\r\n            if(check_val==this.total_cost){\r\n                await axios.post('Procurement/budget/backend/update_plan_full.php',formData)\r\n                    .then(\r\n                        (response)=>{\r\n                            if(response.data==\"OK\"){\r\n                                this.$alert('Successfully Updated Budget Item')\r\n                                    .then(\r\n                                        ()=>{\r\n                                            this.processing = false;                                         \r\n                                        }\r\n                                    )\r\n                                    this.$router.push('edit_bp_json');\r\n                            } else {\r\n                                this.$alert(response.data);\r\n                            }\r\n                        }\r\n                    )\r\n            } else {\r\n                this.$alert('Please check input value(s)');\r\n            }\r\n        },\r\n        return_prev(){\r\n            this.$router.go(-1);\r\n        },\r\n        async fetch_asset(){\r\n            var formData =  new FormData();\r\n            formData.append('dept',this.dept);\r\n            formData.append('st',this.st);\r\n            formData.append('ed',this.ed);\r\n            await axios.post('Procurement/budget/backend/fetch_asset_dept.php',formData)\r\n                .then(\r\n                    (response)=>{\r\n                        if(response.data!='empty'){\r\n                            this.asset_list = response.data;\r\n                            this.asset_cat = this.asset_list[0].code;\r\n                        } else {\r\n                            this.new_asset = true;\r\n                        }\r\n                    }\r\n                )\r\n        },\r\n        async fetch_sub_dept(){\r\n            var formData = new FormData();\r\n            formData.append('dept',this.dept);\r\n            axios.post('Procurement/budget/backend/subdept.php',formData)\r\n                .then(\r\n                    (response)=>{\r\n                        this.sub_dept_list = response.data;                  \r\n                        if(this.sub_dept_list==''){\r\n                            this.display_sub = false;\r\n                            this.sub_dept = 'na';\r\n                        } else {\r\n                            this.sub_dept = this.sub_dept_list[0].subdept;\r\n                            this.display_sub = true;\r\n                        }\r\n                    }\r\n                )\r\n        },\r\n        async fetch_fund(){\r\n            var formData =  new FormData();\r\n            formData.append('dept',this.dept);\r\n            formData.append('st',this.st);\r\n            formData.append('ed',this.ed);\r\n            await axios.post('Procurement/budget/backend/fetch_yr_fund.php',formData)\r\n                .then(\r\n                    (response)=>{\r\n                        if(response.data=='empty'){\r\n                            this.$alert(\"Fundings not found for selected year, please create funding source.\")\r\n                                .then(\r\n                                    ()=>{\r\n                                        this.$router.push('../department/fund');\r\n                                    }\r\n                                )                           \r\n                        } else {\r\n                            this.fundlist = response.data;\r\n                            this.fundsrc[0] = response.data[0].name;\r\n                        }\r\n                    }\r\n                )\r\n        },\r\n        async check_asset(){\r\n\r\n        },\r\n        async fetch_dept(){\r\n            await axios.get('Procurement/department/backend/dept_member.php')\r\n                .then(\r\n                    (response)=>{\r\n                        this.dept_list = response.data;\r\n                        this.dept = this.dept_list[0].deptmentid;             \r\n                    }\r\n                );\r\n        }\r\n    } \r\n}\r\n</script>\r\n<style scoped>\r\n    .flex{\r\n        display:flex;\r\n        flex-direction:row;\r\n    }\r\n    .px0{\r\n        padding-left:0;\r\n        padding-right:0;\r\n    }\r\n    .col-12.flex.px0{\r\n        margin-bottom:1rem;\r\n    }\r\n    .fa-minus{\r\n        color:rgb(238,28,37);\r\n        transition: 0.35s;\r\n        cursor:pointer;\r\n    }\r\n    .fa-minus:hover{\r\n        color:rgb(156,10,16);\r\n    }\r\n    .fa-plus{\r\n        color:rgb(63, 166, 65);\r\n        transition: 0.35s;\r\n        cursor:pointer;\r\n    }\r\n    .fa-plus:hover{\r\n        color:rgb(41, 128, 42);\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/Procurement/budget/edit_bp_full.vue","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/css-loader/index.js?minimize!../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-01b20ca1\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./edit_bp_full.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"64e76cfc\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-01b20ca1\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/Procurement/budget/edit_bp_full.vue\n// module id = 1429\n// module chunks = 89","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".flex[data-v-01b20ca1]{display:flex;flex-direction:row}.px0[data-v-01b20ca1]{padding-left:0;padding-right:0}.col-12.flex.px0[data-v-01b20ca1]{margin-bottom:1rem}.fa-minus[data-v-01b20ca1]{color:#ee1c25;transition:.35s;cursor:pointer}.fa-minus[data-v-01b20ca1]:hover{color:#9c0a10}.fa-plus[data-v-01b20ca1]{color:#3fa641;transition:.35s;cursor:pointer}.fa-plus[data-v-01b20ca1]:hover{color:#29802a}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-01b20ca1\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/Procurement/budget/edit_bp_full.vue\n// module id = 1430\n// module chunks = 89","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.ready)?_c('div',[_c('form',{staticClass:\"col-12\",on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit()}}},[_c('div',{staticClass:\"card\"},[_c('div',{staticClass:\"card-header\"},[_c('strong',[_vm._v(\"Edit Budget Item : \"+_vm._s(_vm.tag))])]),_vm._v(\" \"),_c('div',{staticClass:\"card-body card-block\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"col-12 flex px0\"},[_c('div',{staticClass:\"col-4\"},[_vm._v(\"\\n                        Select Department\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"col-8\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dept),expression:\"dept\"}],staticClass:\"form-control select\",attrs:{\"disabled\":_vm.readonly},on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.dept=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},function($event){return _vm.fetch_dept_info()}]}},_vm._l((_vm.dept_list),function(d){return _c('option',{domProps:{\"value\":d.deptmentid}},[_vm._v(_vm._s(d.department))])}),0)])]),_vm._v(\" \"),(_vm.sub_dept!='na')?_c('div',{staticClass:\"col-12 flex px0\"},[_c('div',{staticClass:\"col-4\"},[_vm._v(\"\\n                        Select Sub Department\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"col-8\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.sub_dept),expression:\"sub_dept\"}],staticClass:\"form-control select\",attrs:{\"disabled\":_vm.readonly},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.sub_dept=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{domProps:{\"value\":_vm.dept}},[_vm._v(\"N/A\")]),_vm._v(\" \"),_vm._l((_vm.sub_dept_list),function(sd){return _c('option',{domProps:{\"value\":sd.subdept}},[_vm._v(_vm._s(sd.subdept_full))])})],2)])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"col-12 flex px0\"},[_c('div',{staticClass:\"col-4\"},[_vm._v(\"\\n                        School Year\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"col-8 flex px0\"},[_c('div',{staticClass:\"col-6\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.st),expression:\"st\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"readonly\":_vm.readonly},domProps:{\"value\":(_vm.st)},on:{\"change\":_vm.update_period,\"input\":function($event){if($event.target.composing){ return; }_vm.st=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"col-6\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.ed),expression:\"ed\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"readonly\":\"\"},domProps:{\"value\":(_vm.ed)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.ed=$event.target.value}}})])])]),_vm._v(\" \"),(_vm.new_asset==false)?_c('div',{staticClass:\"col-12 flex px0\"},[_c('div',{staticClass:\"col-4\"},[_vm._v(\"\\n                        Asset Category\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"col-8\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.asset_cat),expression:\"asset_cat\"}],staticClass:\"form-control select\",attrs:{\"disabled\":_vm.readonly},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.asset_cat=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_vm._l((_vm.asset_list),function(a){return _c('option',{domProps:{\"value\":a.code}},[_vm._v(_vm._s(a.name))])}),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"new_asset_cat\"}},[_vm._v(\"New Asset Category\")])],2)])]):_vm._e(),_vm._v(\" \"),(_vm.new_asset)?_c('div',{staticClass:\"col-12 flex px0\"},[_c('div',{staticClass:\"col-4\"},[_vm._v(\"\\n                        Asset Category\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"col-8\"},[_vm._v(\"\\n                        New Asset Category\\n                    \")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"col-12 flex px0\"},[_c('div',{staticClass:\"col-4\"},[_vm._v(\"\\n                        Description\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"col-8\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.description),expression:\"description\"}],staticClass:\"form-control\",staticStyle:{\"resize\":\"none\"},attrs:{\"rows\":\"2\",\"cols\":\"80\",\"maxlength\":\"160\",\"placeholder\":\"Enter Description\",\"required\":\"\",\"readonly\":_vm.readonly},domProps:{\"value\":(_vm.description)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.description=$event.target.value}}})])]),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('div',{staticClass:\"col-12 flex px0\"},[_c('div',{staticClass:\"col-4\"},[_vm._v(\"\\n                        Unit Cost\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"col-8\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.unit_cost),expression:\"unit_cost\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"step\":\"0.01\",\"min\":\"0.01\",\"onfocus\":this.value='',\"required\":\"\",\"readonly\":_vm.readonly},domProps:{\"value\":(_vm.unit_cost)},on:{\"change\":function($event){return _vm.calculate('unit')},\"input\":function($event){if($event.target.composing){ return; }_vm.unit_cost=$event.target.value}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"col-12 flex px0\"},[_c('div',{staticClass:\"col-4\"},[_vm._v(\"\\n                        Quantity\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"col-8\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.quantity),expression:\"quantity\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"step\":\"1\",\"min\":\"1\",\"required\":\"\",\"readonly\":_vm.readonly},domProps:{\"value\":(_vm.quantity)},on:{\"change\":function($event){return _vm.calculate('quantity')},\"input\":function($event){if($event.target.composing){ return; }_vm.quantity=$event.target.value}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"col-12 flex px0\"},[_c('div',{staticClass:\"col-4\"},[_vm._v(\"\\n                        Total Amount\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"col-8\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.total_cost),expression:\"total_cost\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"step\":\"0.01\",\"min\":\"0.01\",\"required\":\"\",\"readonly\":_vm.readonly},domProps:{\"value\":(_vm.total_cost)},on:{\"change\":function($event){return _vm.calculate('total')},\"input\":function($event){if($event.target.composing){ return; }_vm.total_cost=$event.target.value}}})])]),_vm._v(\" \"),_vm._m(2),_vm._v(\" \"),_vm._l((_vm.counter),function(c){return _c('div',{staticClass:\"col-12 flex px0\"},[_c('div',{staticClass:\"col-3\"},[_vm._v(\"\\n                        Fund Source \"+_vm._s(c)+\"\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"col-1\",staticStyle:{\"text-align\":\"right\",\"padding-top\":\"0.3rem\"}},[((c==1)&&(!_vm.readonly))?_c('i',{staticClass:\"fa fa-plus\",attrs:{\"aria-hidden\":\"true\"},on:{\"click\":_vm.add_item}}):_vm._e(),_vm._v(\" \"),((c>1)&&(!_vm.readonly))?_c('i',{staticClass:\"fa fa-minus\",attrs:{\"aria-hidden\":\"true\"},on:{\"click\":_vm.remove_item}}):_vm._e()]),_vm._v(\" \"),_c('div',{staticClass:\"col-8 flex px0\"},[_c('div',{staticClass:\"col-6\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.fundsrc[c-1]),expression:\"fundsrc[c-1]\"}],staticClass:\"form-control select\",attrs:{\"disabled\":_vm.readonly},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.fundsrc, c-1, $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},_vm._l((_vm.fundlist),function(f){return _c('option',[_vm._v(_vm._s(f.name))])}),0)]),_vm._v(\" \"),_c('div',{staticClass:\"col-6\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.cost[c-1]),expression:\"cost[c-1]\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"step\":\"0.01\",\"min\":\"0.01\",\"required\":\"\",\"readonly\":_vm.readonly},domProps:{\"value\":(_vm.cost[c-1])},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.cost, c-1, $event.target.value)}}})])])])})],2),_vm._v(\" \"),_c('div',{staticClass:\"card-footer\"},[(!_vm.readonly)?_c('button',{staticClass:\"btn btn-primary btn-sm\",attrs:{\"type\":\"submit\",\"disabled\":_vm.processing}},[_c('i',{staticClass:\"fa fa-paper-plane\"}),_vm._v(\" Submit\\n                \")]):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-danger btn-sm\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.return_prev}},[_c('i',{staticClass:\"fa fa-undo\"}),_vm._v(\" Return\\n                \")])])])])]):_vm._e()}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12\"},[_c('label',[_c('b',[_c('u',[_vm._v(\"Section 1. General Information\")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12\"},[_c('label',[_c('b',[_c('u',[_vm._v(\"Section 2. Budget Information\")])])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-12\"},[_c('label',[_c('b',[_c('u',[_vm._v(\"Section 3. Details\")])])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-01b20ca1\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/Procurement/budget/edit_bp_full.vue\n// module id = 1431\n// module chunks = 89","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader?minimize!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-01b20ca1\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./edit_bp_full.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit_bp_full.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit_bp_full.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-01b20ca1\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit_bp_full.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-01b20ca1\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/Procurement/budget/edit_bp_full.vue\n// module id = 317\n// module chunks = 89"],"sourceRoot":""}